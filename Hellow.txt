<form [formGroup]="scheduleAndSampleForm">
  <div *ngFor="let vendor of selectedVendors; let i = index" class="vendor-section">
    <div class="vendor-header">{{ vendorList[i].text }}</div>
    
    <!-- Fixed Sample Dropdown for each Vendor -->
    <div>
      <label for="sampleDropdown-{{i}}">Select Fixed Sample</label>
      <select id="sampleDropdown-{{i}}" formControlName="selectedSample" (change)="onSampleChange(i, $event.target.value)">
        <option *ngFor="let sample of availableSamples[i]" [value]="sample">{{ sample }}</option>
      </select>
      <div *ngIf="sampleErrors[i]" class="error">Sample already selected for another vendor in the same week</div>
    </div>

    <!-- Rotation Dropdown for each Vendor -->
    <div>
      <label for="rotationDropdown-{{i}}">Select Rotation</label>
      <select id="rotationDropdown-{{i}}" formControlName="selectedRotation" (change)="onRotationChange(i, $event.target.value)">
        <option *ngFor="let rotation of rotationOptions" [value]="rotation">{{ rotation }}</option>
      </select>
      <div *ngIf="rotationErrors[i]" class="error">Rotation sample already selected for another vendor in the same week</div>
    </div>

    <hr>
  </div>

  <!-- Submit Button -->
  <button type="button" (click)="updateGridData()">Submit</button>
</form>

<!-- Grid Displaying the Scheduled Data -->
<table>
  <thead>
    <tr>
      <th>MMYY</th>
      <th>Start Week</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Vendor</th>
      <th>Selected Sample</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of displayedData">
      <td>{{ row.MMYY }}</td>
      <td>{{ row.Start_Week }}</td>
      <td>{{ row.Start_Date }}</td>
      <td>{{ row.End_Date }}</td>
      <td>{{ row.Vendor }}</td>
      <td>{{ row.selectedSample }}</td>
    </tr>
  </tbody>
</table>
