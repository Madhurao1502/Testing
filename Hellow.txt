formatDate(dateString: string) { 
  // First, try to create a valid Date object safely
  let parsedDate = this.safeParseDate(dateString);

  if (isNaN(parsedDate.getTime())) {
    console.error("Invalid date format:", dateString);
    return "Invalid Date";
  }

  return new Intl.DateTimeFormat(navigator.language).format(parsedDate);
}

// Helper function to safely parse a date from different formats
safeParseDate(dateString: string): Date {
  if (!dateString) return new Date(NaN);

  // If the date is already a valid ISO string or a standard format
  let parsed = Date.parse(dateString);
  if (!isNaN(parsed)) return new Date(parsed);

  // If it's in DD-MM-YYYY or other non-standard formats, fix it
  return this.fixDateFormat(dateString);
}

// Function to manually fix DD-MM-YYYY or MM-DD-YYYY cases
fixDateFormat(dateString: string): Date {
  const parts = dateString.split(/[-\/]/); // Support both "-" and "/"

  if (parts.length === 3) {
    let [part1, part2, part3] = parts.map(Number);

    // Check if the format is DD-MM-YYYY or MM-DD-YYYY
    if (part1 > 12) {
      // Assume it's DD-MM-YYYY
      return new Date(part3, part2 - 1, part1);
    } else {
      // Assume it's MM-DD-YYYY
      return new Date(part3, part1 - 1, part2);
    }
  }

  return new Date(NaN); // Return invalid date
}
